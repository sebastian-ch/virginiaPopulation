{"version":3,"sources":["vaNum.geojson","dissolve.geojson","App.js","index.js"],"names":["mapboxgl","accessToken","App","mapContainer","useRef","map","useState","lng","lat","zoom","countyName","setCountyName","title","setTitle","useEffect","current","Map","container","style","center","dragPan","on","firstSymbolId","layers","getStyle","i","length","type","id","fetch","dissolved","then","resp","json","data","bbox1","mask","addLayer","addSource","source","e","features","properties","Locality","className","onClick","setPaintProperty","ref","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+MAAe,MAA0B,sCCA1B,MAA0B,yC,OCOzCA,IAASC,YAAc,mGAsQRC,MAnQf,WAEE,IAAMC,EAAeC,iBAAO,MACtBC,EAAMD,iBAAO,MACnB,EAAsBE,oBAAU,MAAhC,mBAAOC,EAAP,KACA,GADA,KACsBD,mBAAS,OAA/B,mBAAOE,EAAP,KACA,GADA,KACwBF,mBAAS,MAAjC,mBAAOG,EAAP,KACA,GADA,KACoCH,sBAApC,mBAAOI,EAAP,KAAmBC,EAAnB,KACA,EAA0BL,mBAAS,sBAAnC,mBAAOM,EAAP,KAAcC,EAAd,KAuOA,OApOAC,qBAAU,WAEJT,EAAIU,UACRV,EAAIU,QAAU,IAAIf,IAASgB,IAAI,CAC7BC,UAAWd,EAAaY,QACxBG,MAAO,mCACPC,OAAQ,CAACZ,EAAKC,GACdC,KAAMA,EACNW,SAAS,IAKXf,EAAIU,QAAQM,GAAG,QAAQ,WAKnB,IAHF,IAEIC,EAFEC,EAASlB,EAAIU,QAAQS,WAAWD,OAG3BE,EAAI,EAAGA,EAAIF,EAAOG,OAAQD,IACjC,GAAuB,WAAnBF,EAAOE,GAAGE,KAAmB,CAC/BL,EAAgBC,EAAOE,GAAGG,GAC1B,MAINC,MAAMC,GACHC,MAAK,SAAAC,GAAI,OAAIA,EAAKC,UAClBF,MAAK,SAAAG,GAEJ,IAAMC,EAAQC,eAAKF,GAEjB7B,EAAIU,QAAQsB,SAAS,CACnB,GAAM,OACN,KAAQ,OACR,OAAU,CACN,KAAQ,UACR,KAAQF,GAEZ,OAAU,GACV,MAAS,CACL,aAAc,OACd,eAAgB,KAErBb,MAKPjB,EAAIU,QAAQuB,UAAU,YAAa,CACjCX,KAAM,UACNO,SAGF7B,EAAIU,QAAQsB,SACV,CACET,GAAI,KACJD,KAAM,OACNY,OAAQ,YACR,MAAS,CAEP,aAAc,CACZ,cACA,CAAC,UACD,CAAC,MAAO,WACR,EAAG,UACH,MAAO,UACP,OAAQ,UACR,OAAQ,UACR,QAAS,WAGX,eAAgB,MAEjBjB,GAGLjB,EAAIU,QAAQsB,SACV,CACE,GAAM,UACN,KAAQ,OACR,OAAU,YACV,MAAS,CACP,aAAc,CACZ,cACA,CAAC,UACD,CAAC,MAAO,WACR,EAAG,UACH,MAAO,UACP,OAAQ,UACR,OAAQ,UACR,QAAS,aAIZf,MAKPjB,EAAIU,QAAQM,GAAG,YAAa,MAAM,SAACmB,GAGjC7B,EAAc6B,EAAEC,SAAS,GAAGC,WAAWC,aASzCtC,EAAIU,QAAQM,GAAG,WAAY,MAAM,SAACmB,GAEhC7B,WAoHF,sBAAKiC,UAAU,MAAf,UACE,qBAAKA,UAAU,UAAf,SACE,sBAAKA,UAAU,QAAf,UACGhC,EADH,IACU,uBADV,gBAEgBF,EAFhB,IAE4B,uBAF5B,eAGc,uBACZ,sBAAKkC,UAAU,aAAf,UACE,wBAAQC,QAlHlB,WAIExC,EAAIU,QAAQ+B,iBAAiB,KAAM,aACnC,CACE,cACA,CAAC,UACD,CAAC,MANM,WAOP,EAAG,UACH,MAAO,UACP,OAAQ,UACR,OAAQ,UACR,QAAS,YAIXzC,EAAIU,QAAQ+B,iBAAiB,UAAW,aACxC,CACE,cACA,CAAC,UACD,CAAC,MAAO,WACR,EAAG,UACH,MAAO,UACP,OAAQ,UACR,OAAQ,UACR,QAAS,YAKXjC,EAAS,uBAmFyB+B,UAAU,SAApC,gCADF,IAC2E,uBACzE,wBAAQC,QA9ElB,WAEExC,EAAIU,QAAQ+B,iBAAiB,KAAM,aACnC,CACE,cACA,CAAC,UACD,CAAC,MAAO,WACR,EAAG,UACH,MAAO,UACP,OAAQ,UACR,OAAQ,UACR,OAAQ,YAIVzC,EAAIU,QAAQ+B,iBAAiB,UAAW,aACxC,CACE,cACA,CAAC,UACD,CAAC,MAAO,WACR,EAAG,UACH,MAAO,UACP,OAAQ,UACR,OAAQ,UACR,OAAQ,YAKVjC,EAAS,uBAiDyB+B,UAAU,SAApC,gCAFF,IAE2E,uBACzE,wBAAQC,QA9ClB,WAIExC,EAAIU,QAAQ+B,iBAAiB,KAAM,aACnC,CACE,cACA,CAAC,UACD,CAAC,MAAO,cACP,KAAM,UACP,EAAG,OACH,OAAQ,YAKVzC,EAAIU,QAAQ+B,iBAAiB,UAAW,aACxC,CACE,cACA,CAAC,UACD,CAAC,MAAO,cACP,KAAM,UACP,EAAG,OACH,OAAQ,YAMVjC,EAAS,iCAiBoC+B,UAAU,SAA/C,mCAAsF,+BAI5F,qBAAKG,IAAK5C,EAAcyC,UAAU,kBAClC,8ECjQNI,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.513cabea.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/vaNum.11b4230b.geojson\";","export default __webpack_public_path__ + \"static/media/dissolve.9bfcdcb1.geojson\";","import React, { useRef, useEffect, useState } from 'react';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\n\nimport {mask} from '@turf/turf'\nimport data from './vaNum.geojson'\nimport dissolved from './dissolve.geojson'\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoic2ViYXN0aWFuLWNoIiwiYSI6ImNpejkxdzZ5YzAxa2gyd21udGpmaGU0dTgifQ.IrEd_tvrl6MuypVNUGU5SQ';\n\n\nfunction App() {\n\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [lng, setLng] = useState(-79.1);\n  const [lat, setLat] = useState(37.7);\n  const [zoom, setZoom] = useState(6.5);\n  const [countyName, setCountyName] = useState();\n  const [title, setTitle] = useState('Population in 2020');\n  \n\n  useEffect(() => {\n\n    if (map.current) return; // initialize map only once\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/light-v10',\n      center: [lng, lat],\n      zoom: zoom,\n      dragPan: false\n    });\n\n\n\n    map.current.on('load', () => {\n\n      const layers = map.current.getStyle().layers;\n      // Find the index of the first symbol layer in the map style\n      var firstSymbolId;\n        for (var i = 0; i < layers.length; i++) {\n          if (layers[i].type === 'symbol') {\n            firstSymbolId = layers[i].id;\n            break;\n          }\n      }\n\n      fetch(dissolved)\n        .then(resp => resp.json())\n        .then(data => {\n      \n          const bbox1 = mask(data);\n\n            map.current.addLayer({\n              'id': 'mask',\n              'type': 'fill',\n              'source': {\n                  'type': 'geojson',\n                  'data': bbox1\n              },\n              'layout': {},\n              'paint': {\n                  'fill-color': 'gray',\n                  'fill-opacity': 0.8\n              }\n          }, firstSymbolId\n          );\n        })\n\n\n      map.current.addSource('countries', {\n        type: 'geojson',\n        data\n      })\n\n      map.current.addLayer(\n        {\n          id: 'va',\n          type: 'fill',\n          source: 'countries',\n          'paint': {\n            \n            'fill-color': [\n              'interpolate',\n              ['linear'],\n              ['get', '2020pop'],\n              0, \"#d7d7d7\",\n              49448, '#A1ABC0',\n              137739, '#6B80A9',\n              247564, '#355492',\n              1146200, '#00297b'\n        \n            ],\n            'fill-opacity': 0.75\n            }\n        }, firstSymbolId\n      );\n\n      map.current.addLayer(\n        {\n          'id': 'outline',\n          'type': 'line',\n          'source': 'countries',\n          'paint': {\n            'line-color': [\n              'interpolate',\n              ['linear'],\n              ['get', '2020pop'],\n              0, \"#d7d7d7\",\n              49448, '#A1ABC0',\n              137739, '#6B80A9',\n              247564, '#355492',\n              1146200, '#00297b'\n        \n            ]\n          }\n        }, firstSymbolId\n      );\n\n    });\n\n    map.current.on('mousemove', 'va', (e) => {\n\n     \n      setCountyName(e.features[0].properties.Locality)\n\n    /*  new mapboxgl.Popup()\n        .setLngLat(e.lngLat)\n        .setHTML(e.features[0].properties.Locality)\n        .addTo(map.current) */\n\n    })\n\n    map.current.on('mouseout', 'va', (e) => {\n\n      setCountyName()\n    \n      \n    }) \n\n\n  });\n\n\n  function pop2020() {\n\n    var id = '2020pop';\n\n    map.current.setPaintProperty('va', 'fill-color',\n    [\n      'interpolate',\n      ['linear'],\n      ['get', id],\n      0, \"#d7d7d7\",\n      49448, '#A1ABC0',\n      137739, '#6B80A9',\n      247564, '#355492',\n      1146200, '#00297b'\n\n    ]);\n\n    map.current.setPaintProperty('outline', 'line-color',\n    [\n      'interpolate',\n      ['linear'],\n      ['get', '2020pop'],\n      0, \"#d7d7d7\",\n      49448, '#A1ABC0',\n      137739, '#6B80A9',\n      247564, '#355492',\n      1146200, '#00297b'\n\n    ]);\n\n\n    setTitle('Population in 2020')\n  \n\n  }\n\n\n  function pop2010(){\n\n    map.current.setPaintProperty('va', 'fill-color',\n    [\n      'interpolate',\n      ['linear'],\n      ['get', '2010pop'],\n      0, \"#d7d7d7\",\n      46689, '#A1ABC0',\n      122397, '#6B80A9',\n      242803, '#355492',\n      437994, '#00297b'\n\n    ]);\n\n    map.current.setPaintProperty('outline', 'line-color',\n    [\n      'interpolate',\n      ['linear'],\n      ['get', '2010pop'],\n      0, \"#d7d7d7\",\n      46689, '#A1ABC0',\n      122397, '#6B80A9',\n      242803, '#355492',\n      437994, '#00297b'\n\n    ]);\n\n\n    setTitle('Population in 2010')\n  \n  }\n\n  function popChangeSince2010() {\n\n\n\n    map.current.setPaintProperty('va', 'fill-color',\n    [\n      'interpolate',\n      ['linear'],\n      ['get', 'NumCh2010'],\n      -3647, \"#ff350f\",\n      0, \"#ccc\",\n      106379, '#00297b'\n\n    ]);\n\n\n    map.current.setPaintProperty('outline', 'line-color',\n    [\n      'interpolate',\n      ['linear'],\n      ['get', 'NumCh2010'],\n      -3647, \"#ff350f\",\n      0, \"#ccc\",\n      106379, '#00297b'\n\n    ]);\n\n\n\n    setTitle('Population Change Since 2010')\n\n\n  }\n\n\n  \n  return (\n    <div className=\"App\">\n      <div className=\"sidebar\">\n        <div className='words'>\n          {title} <br></br>\n          County Name: {countyName} <br></br>\n          Population: <br></br>\n          <div className='allButtons'>\n            <button onClick={pop2020} className='button'>Population in 2020</button> <br></br>\n            <button onClick={pop2010} className='button'>Population in 2010</button> <br></br>\n            <button onClick={popChangeSince2010} className='button'>Pop change since 2010</button><br></br>\n          </div> \n       </div>\n      </div>\n      <div ref={mapContainer} className=\"map-container\" />\n      <footer>Made with React, Mapbox, and Turf.js</footer>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}